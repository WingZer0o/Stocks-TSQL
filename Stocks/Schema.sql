USE Stocks;
GO

IF EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'TimeSeriesDaily')
	BEGIN
		DROP TABLE TimeSeriesDaily;
	END

IF EXISTS (SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = 'Tickers')
	BEGIN
		DROP TABLE Tickers;
	END

CREATE TABLE Tickers (
	ID UNIQUEIDENTIFIER PRIMARY KEY NOT NULL DEFAULT NEWID(),
	Ticker NVARCHAR(50) NOT NULL
);

CREATE UNIQUE INDEX Ticker_Index ON [dbo].[Tickers] (Ticker);

CREATE TABLE TimeSeriesDaily (
	ID UNIQUEIDENTIFIER PRIMARY KEY NOT NULL DEFAULT NEWID(),
	[Date] DATETIME NOT NULL,
	[Close] NVARCHAR(250) NOT NULL,
	[High] NVARCHAR(250) NOT NULL,
	[Low] NVARCHAR(250) NOT NULL,
	[Open] NVARCHAR(250) NOT NULL,
	[Volumne] NVARCHAR(1000) NOT NULL,
	Ticker UNIQUEIDENTIFIER FOREIGN KEY REFERENCES Tickers(ID)
);

CREATE UNIQUE INDEX Date_Index ON [dbo].[TimeSeriesDaily] (Date)